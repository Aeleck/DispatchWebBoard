!function(e){"use strict";function t(){}function o(e){return function(){return this[e].apply(this,arguments)}}let s=t.prototype;s._apiLookupCall=function(e){return new Promise((t,o)=>{e=e.toUpperCase();$.ajax({dataType:"json",url:`https://system.api.fuelrats.com/systems?filter[name:eq]=${encodeURIComponent(e)}&include=bodies`,success:function(s){if(s.meta.results.returned<1)return window.console.debug(`StarSystems - No system info found for: ${e}. Sysinfo search failed. Calling failCallback.`),sessionStorage.setItem(`${fr.config.AppNamespace}.system.${e.toUpperCase()}`,null),void o("System not found.");let n=s.data[0],i=n.attributes.name;if(s.included&&s.included[0]){n.bodies=s.included.filter(function(e){return"Star"===e.attributes.group_name});for(let e in n.bodies)n.bodies.hasOwnProperty(e)&&(delete n.bodies[e].relationships,delete n.bodies[e].type,delete n.bodies[e].links)}delete n.relationships,delete n.type,delete n.links,sessionStorage.getItem(`${fr.config.AppNamespace}.system.${i}`)||sessionStorage.setItem(`${fr.config.AppNamespace}.system.${i}`,JSON.stringify(n)),window.console.debug("StarSystems - System information found: ",n),t(n)}})})},s.getSysInfo=function(e){if(e=e.toUpperCase(),sessionStorage.getItem(`${fr.config.AppNamespace}.system.${e}`)){let t=JSON.parse(sessionStorage.getItem(`${fr.config.AppNamespace}.system.${e}`));return window.console.debug("StarSystems - Cached System Info Requested: ",t),null===t?Promise.reject("System not found."):Promise.resolve(t)}return window.console.debug(`StarSystems - Retrieving System Info: ${e}`),fr.sysapi._apiLookupCall(e)},s.get=o("getSysInfo"),s.deleteCachedInfo=function(e){let t=e.toUpperCase();sessionStorage.getItem(`${fr.config.AppNamespace}.system.${t}`)&&sessionStorage.removeItem(`${fr.config.AppNamespace}.system.${t}`)},s.delete=o("deleteCachedInfo"),e.StarSystems=t}(this||{});