fr.sysapi={GetSysInfo:function(e){let s=e.toUpperCase();if(sessionStorage.getItem(`system.${s}`)){let e=JSON.parse(sessionStorage.getItem(`system.${s}`));return window.console.debug("fr.sysapi.GetSysInfo - Cached System Info Requested: ",e),null===e?Promise.reject("System not found."):Promise.resolve(e)}return window.console.debug(`fr.sysapi.GetSysInfo - Retrieving System Info: ${e}`),fr.sysapi.ApiLookupCall(s)},ApiLookupCall:function(e){return new Promise((s,t)=>{$.ajax({dataType:"json",url:`https://system.api.fuelrats.com/systems?filter[name:eq]=${encodeURIComponent(e)}&include=bodies`,success:function(o){if(o.meta.results.returned<1)return window.console.debug(`fr.sysapi.ApiEqCall - No system info found for: ${e}. Sysinfo search failed. Calling failCallback.`),sessionStorage.setItem(`system.${e.toUpperCase()}`,null),void t("System not found.");let n=o.data[0],i=n.attributes.name;if(o.included&&o.included[0]){n.bodies=o.included.filter(function(e){return"Star"===e.attributes.group_name});for(let e in n.bodies)n.bodies.hasOwnProperty(e)&&(delete n.bodies[e].relationships,delete n.bodies[e].type,delete n.bodies[e].links)}delete n.relationships,delete n.type,delete n.links,sessionStorage.getItem("system."+i)||sessionStorage.setItem("system."+i,JSON.stringify(n)),window.console.debug("fr.sysapi.ApiLookupCall - System information found: ",n),s(n)}})})},DeleteCachedInfo:function(e){let s=e.toUpperCase();sessionStorage.getItem("system."+s)&&sessionStorage.removeItem("system."+s)}};