fr.sysapi={GetSysInfo:function(e,s,t){let o=e.toUpperCase();if(sessionStorage.getItem("system."+o)){let e=JSON.parse(sessionStorage.getItem("system."+o));if(debug&&window.console.log("fr.sysapi.GetSysInfo - Cached System Info Requested: ",e),null===e)return void t("error","Not Found",null);s(e)}else debug&&window.console.log("fr.sysapi.GetSysInfo - Retrieving System Info: "+e),fr.sysapi.ApiLookupCall(o,s,t)},ApiLookupCall:function(e,s,t){$.ajax({dataType:"json",url:"https://system.api.fuelrats.com/systems?filter[name:eq]="+encodeURIComponent(e)+"&include=bodies",success:function(o){if(o.meta.results.returned<1)return debug&&window.console.log('fr.sysapi.ApiEqCall - No system info found for: "'+e+'". Sysinfo search failed. Calling failCallback.'),sessionStorage.setItem("system."+e.toUpperCase(),null),void t();let i=o.data[0],n=i.attributes.name;if(o.included&&o.included[0]){i.bodies=o.included.filter(function(e){return"Star"===e.attributes.group_name});for(let e in i.bodies)i.bodies.hasOwnProperty(e)&&(delete i.bodies[e].relationships,delete i.bodies[e].type,delete i.bodies[e].links)}delete i.relationships,delete i.type,delete i.links,sessionStorage.getItem("system."+n)||sessionStorage.setItem("system."+n,JSON.stringify(i)),debug&&window.console.log("fr.sysapi.ApiEqCall - System information found: ",i),s(i)}})},DeleteCachedInfo:function(e){let s=e.toUpperCase();sessionStorage.getItem("system."+s)&&sessionStorage.removeItem("system."+s)}};